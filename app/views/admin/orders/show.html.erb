<h3>注文履歴詳細</h3>
<table class="table table-borderless">
  <tbody>
    <tr>
      <th>購入者</th>
      <td><%= @order.customer.family_name + @order.customer.family_name%></td>
    </tr>
    <tr>
      <th>注文日</th>
      <td><%= l @order.created_at, format: :short %></td>
    </tr>
    <tr>
      <th>配送先</th>
      <td><%= @order.shipping_address %></td>
    </tr>
    <tr>
      <th>支払方法</th>
      <td><%= @order.payment_method_i18n %></td>
    </tr>
    <tr>
      <%= form_with model:@order, url:admin_order_path, method: :patch, local:true do |f| %>
      <th><%= f.label :"注文ステータス" %></th>
        <td><%= f.select :order_status, Order.order_statuses.keys.map {|k| [I18n.t("enums.order.order_status.#{k}"), k]} %></td>
    　　<td><%= f.submit :"新規登録",  class: 'btn btn-success' %></td>
      <% end %>
    </tr>
  </tbody>
</table>

 <table class="table table-hover">
        <thead class="thead-light">
        <tr>
          <th scope="col">商品名</th>
          <th scope="col">単価</th>
          <th scope="col">数量</th>
          <th scope="col">小計</th>
        </tr>
        </thead>

        <tbody>


          <% @order.order_details.each do |order_detail| %>
          <tr>
            <td><%= order_detail.product.name%></td>
            <td><%= order_detail.product.add_no_tax_price.to_s(:delimited) %></td>
            <td><%= order_detail.quantity %></td>
            <td><%= order_detail.subtotal.to_s(:delimited) %></td>
            <%= form_with model:@order_details, url:admin_order_path, method: :patch, local:true do |f| %>
            <td><%= f.select :production_status, OrderDetail.production_statuses.keys.map {|k| [I18n.t("enums.order.order_detail.#{k}"), k]} %></td>
          <% end %>
          </tr>
          
          <% end %>
        </tbody>